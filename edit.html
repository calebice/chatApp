<h1>Editing {{.Title}}.txt</h1>

  <div>
    <textarea name="body" id=writer rows="50" cols="150">
      {{printf "%s" .Body}}
    </textarea>
  </div>

<script>
function update() {
  var node = document.getElementById('writer')
  var path = "/save/" + {{.Title}}
  var body = node.value
  // console.log("In update");
  // console.log("body: %s", body);
  // console.log("path: %s", path);
  
  postBody(path, body);
}

function postBody(path, body) {
  var xhr = new XMLHttpRequest()
  xhr.open("POST", path, true)
  xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8")
  xhr.send(body)
}

// document.getElementById("writer").focus()
console.log("Hello testing in edit.html")
setInterval(update, 3000)

</script>
